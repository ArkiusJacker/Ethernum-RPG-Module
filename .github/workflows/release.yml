name: Package and Release Module

on:
  release:
    types: [published]

jobs:
  package:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Create module package
        run: |
          # Create zip file excluding development files
          zip -r ethernum-rpg-module.zip . \
            -x "*.git*" \
            -x ".github/*" \
            -x ".gitignore"
      
      - name: Upload release assets
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          gh release upload ${{ github.event.release.tag_name }} \
            ethernum-rpg-module.zip \
            module.json \
            --clobber
